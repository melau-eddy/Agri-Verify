<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AgriVerify - GMO Information & Verification Portal</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#2E7D32", secondary: "#689F38" },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <style>
      :where([class^="ri-"])::before {
        content: "\f3c2";
      }
      body {
        font-family: "Poppins", sans-serif;
      }
      .chat-container {
        height: calc(100vh - 350px);
        min-height: 400px;
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #a1a1aa;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: #2e7d32;
        border-radius: 50%;
        cursor: pointer;
      }
      .custom-checkbox {
        position: relative;
        display: inline-block;
        width: 20px;
        height: 20px;
      }
      .custom-checkbox input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 20px;
        width: 20px;
        background-color: #fff;
        border: 2px solid #d1d5db;
        border-radius: 4px;
      }
      .custom-checkbox input:checked ~ .checkmark {
        background-color: #2e7d32;
        border-color: #2e7d32;
      }
      .checkmark:after {
        content: "";
        position: absolute;
        display: none;
      }
      .custom-checkbox input:checked ~ .checkmark:after {
        display: block;
      }
      .custom-checkbox .checkmark:after {
        left: 6px;
        top: 2px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
      }
      .switch {
        position: relative;
        display: inline-block;
        width: 48px;
        height: 24px;
      }
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #e5e7eb;
        transition: 0.4s;
        border-radius: 24px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }
      input:checked + .slider {
        background-color: #2e7d32;
      }
      input:checked + .slider:before {
        transform: translateX(24px);
      }
      .video-progress {
        -webkit-appearance: none;
        width: 100%;
        height: 4px;
        border-radius: 2px;
        background: #e5e7eb;
        outline: none;
      }
      .video-progress::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #2e7d32;
        cursor: pointer;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
      <div
        class="container mx-auto px-4 py-3 flex items-center justify-between"
      >
        <div class="flex items-center gap-2">
          <div
            class="w-10 h-10 flex items-center justify-center bg-primary rounded-full text-white"
          >
            <i class="ri-plant-line ri-lg"></i>
          </div>
          <h1 class="text-2xl font-['Pacifico'] text-primary">AgriVerify</h1>
        </div>
        <div class="relative max-w-md w-full mx-4 hidden md:block">
          <div
            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
          >
            <i class="ri-search-line text-gray-400"></i>
          </div>
          <input
            type="text"
            class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-full bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"
            placeholder="Search for crops, products, or GMO information..."
          />
        </div>
        <div class="flex items-center gap-4">
          <button
            class="md:hidden w-10 h-10 flex items-center justify-center text-gray-500 hover:bg-gray-100 rounded-full"
          >
            <i class="ri-search-line ri-lg"></i>
          </button>
          <button
            class="w-10 h-10 flex items-center justify-center text-gray-500 hover:bg-gray-100 rounded-full"
          >
            <i class="ri-notification-3-line ri-lg"></i>
          </button>
          <div class="relative">
            <button
              class="w-10 h-10 flex items-center justify-center bg-gray-200 rounded-full overflow-hidden"
            >
              <i class="ri-user-3-line ri-lg text-gray-700"></i>
            </button>
          </div>
        </div>
      </div>
    </header>
    <main class="container mx-auto px-4 py-6">
        {% block content %}
        {% endblock %}
    </main>
    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-10">
      <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <div class="flex items-center gap-2 mb-4">
              <div
                class="w-10 h-10 flex items-center justify-center bg-primary rounded-full text-white"
              >
                <i class="ri-plant-line ri-lg"></i>
              </div>
              <h1 class="text-2xl font-['Pacifico'] text-primary">
                AgriVerify
              </h1>
            </div>
            <p class="text-gray-600 text-sm">
              The official platform for GMO product verification and
              agricultural information, supported by the Department of
              Agriculture.
            </p>
          </div>
          <div>
            <h3 class="font-medium mb-4">Government Resources</h3>
            <ul class="space-y-2">
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-government-line"></i> Department of
                  Agriculture</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-file-list-3-line"></i> GMO Regulations</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-shield-check-line"></i> Verification Process</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-calendar-check-line"></i> Approval Timeline</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h3 class="font-medium mb-4">Help Center</h3>
            <ul class="space-y-2">
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-question-line"></i> FAQs</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-book-open-line"></i> Learning Resources</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-chat-1-line"></i> Contact Support</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-600 hover:text-primary text-sm flex items-center gap-2"
                  ><i class="ri-video-chat-line"></i> Webinars</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h3 class="font-medium mb-4">Contact Information</h3>
            <ul class="space-y-2">
              <li class="text-gray-600 text-sm flex items-center gap-2">
                <i class="ri-map-pin-line"></i> 1400 Independence Ave,
                Washington, DC
              </li>
              <li class="text-gray-600 text-sm flex items-center gap-2">
                <i class="ri-phone-line"></i> (202) 720-2791
              </li>
              <li class="text-gray-600 text-sm flex items-center gap-2">
                <i class="ri-mail-line"></i> info@agriverify.gov
              </li>
            </ul>
            <div class="mt-4">
              <h4 class="text-sm font-medium mb-2">Language</h4>
              <div class="relative">
                <select
                  class="appearance-none bg-white border border-gray-200 rounded-lg py-2 pl-4 pr-10 w-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"
                >
                  <option>English</option>
                  <option>kiswahili</option>
                </select>
                <div
                  class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"
                >
                  <i class="ri-arrow-down-s-line text-gray-400"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="border-t border-gray-200 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center"
        >
          <p class="text-gray-500 text-sm">
            © 2025 AgriVerify. All rights reserved.
          </p>
          <div class="flex items-center gap-4 mt-4 md:mt-0">
            <a href="#" class="text-gray-400 hover:text-primary">
              <i class="ri-facebook-fill ri-lg"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary">
              <i class="ri-twitter-x-fill ri-lg"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary">
              <i class="ri-instagram-fill ri-lg"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary">
              <i class="ri-youtube-fill ri-lg"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const chatContainer = document.querySelector(".chat-container");
        const chatInput = document.querySelector(
          'input[placeholder="Type your question about GMOs..."]'
        );
        const sendButton =
          chatInput.nextElementSibling.querySelector("button:last-child");
        const responses = {
          "gmo regulations":
            "GMO regulations require extensive safety testing and environmental impact assessments. Key requirements include:\n- Safety studies for human consumption\n- Environmental impact evaluation\n- Clear labeling of GMO products\n- Regular monitoring and reporting",
          "verified corn seeds":
            "Our verified corn seeds include DroughtGuard and other certified varieties. Each has passed rigorous testing for:\n- Drought resistance\n- Pest resistance\n- Yield performance\n- Environmental safety",
          "benefits of gmo crops":
            "GMO crops offer several key benefits:\n- Increased crop yields\n- Better resistance to pests\n- Improved drought tolerance\n- Enhanced nutritional content\n- Reduced pesticide use",
        };
        function addMessage(message, isUser = false) {
          const messageHTML = `
<div class="flex gap-3 mb-6 ${isUser ? "justify-end" : ""}">
${
  isUser
    ? `
<div class="bg-primary text-white rounded-lg rounded-tr-none p-3 max-w-[80%]">
<p>${message}</p>
</div>
<div class="w-8 h-8 flex-shrink-0 flex items-center justify-center bg-gray-200 rounded-full mt-1">
<i class="ri-user-3-line text-gray-700"></i>
</div>
`
    : `
<div class="w-8 h-8 flex-shrink-0 flex items-center justify-center bg-primary/10 text-primary rounded-full mt-1">
<i class="ri-robot-line"></i>
</div>
<div class="bg-gray-100 rounded-lg rounded-tl-none p-3 max-w-[80%]">
<p class="text-gray-800 whitespace-pre-line">${message}</p>
</div>
`
}
</div>
`;
          chatContainer.insertAdjacentHTML("beforeend", messageHTML);
          chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        function getResponse(message) {
          const normalizedMessage = message.toLowerCase();
          let response =
            "I understand you're asking about " +
            message +
            ". Let me help you with that.\n\n";
          if (
            normalizedMessage.includes("regulation") ||
            normalizedMessage.includes("rule")
          ) {
            response += responses["gmo regulations"];
          } else if (
            normalizedMessage.includes("corn") ||
            normalizedMessage.includes("seed")
          ) {
            response += responses["verified corn seeds"];
          } else if (
            normalizedMessage.includes("benefit") ||
            normalizedMessage.includes("advantage")
          ) {
            response += responses["benefits of gmo crops"];
          } else if (normalizedMessage.includes("safe")) {
            response +=
              "GMO products approved for market have undergone extensive safety testing and are considered safe for consumption. Each product is carefully evaluated for:\n- Food safety\n- Environmental impact\n- Agricultural benefits";
          } else {
            response =
              "I'm here to help with your GMO-related questions. Could you please specify what you'd like to know about:\n- GMO regulations\n- Verified seeds\n- Safety information\n- Benefits and advantages";
          }
          return response;
        }
        function handleMessage() {
          const message = chatInput.value.trim();
          if (message !== "") {
            addMessage(message, true);
            chatInput.value = "";
            setTimeout(() => {
              const response = getResponse(message);
              addMessage(response);
            }, 500);
          }
        }
        sendButton.addEventListener("click", handleMessage);
        chatInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            handleMessage();
          }
        });
        const suggestionButtons = document.querySelectorAll(
          ".flex.flex-wrap.gap-2.mb-6 button"
        );
        suggestionButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const message = button.textContent;
            addMessage(message, true);
            setTimeout(() => {
              const response =
                responses[message.toLowerCase()] || getResponse(message);
              addMessage(response);
            }, 500);
          });
        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        // Video player functionality
        const playButton = document.querySelector(
          ".w-12.h-12.flex.items-center.justify-center.bg-primary"
        );
        const videoProgress = document.querySelector(".video-progress");
        playButton.addEventListener("click", function () {
          const isPlaying = playButton
            .querySelector("i")
            .classList.contains("ri-pause-fill");
          if (isPlaying) {
            playButton.querySelector("i").classList.remove("ri-pause-fill");
            playButton.querySelector("i").classList.add("ri-play-fill");
          } else {
            playButton.querySelector("i").classList.remove("ri-play-fill");
            playButton.querySelector("i").classList.add("ri-pause-fill");
          }
        });
        videoProgress.addEventListener("input", function () {
          // This would normally update the video time
        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        // Product filters functionality
        const filterSelects = document.querySelectorAll(".p-4 select");
        filterSelects.forEach((select) => {
          select.addEventListener("change", function () {
            // This would normally filter the products
          });
        });
        // Pagination functionality
        const pagination = document.getElementById("pagination");
        const prevPageBtn = document.getElementById("prevPage");
        const nextPageBtn = document.getElementById("nextPage");
        let currentPage = 1;
        const page2Products = [
          {
            name: "FrostShield Wheat",
            company: "WinterCrop Solutions",
            type: "Wheat",
            season: "Winter",
            status: "verified",
            image: "/images/wheat.jpg",
          },
          {
            name: "BetaSweet Sugarbeet",
            company: "SugarTech Industries",
            type: "Sugarbeet",
            season: "Spring",
            status: "verified",
            image: "/images/sugarbeet.jpg",
          },
          {
            name: "AlfalfaMax Pro",
            company: "FeedCrop Genetics",
            type: "Alfalfa",
            season: "Summer",
            status: "verified",
            image: "/images/affaf-seed.jpg",
          },
          {
            name: "PotatoGuard Elite",
            company: "RootCrop Sciences",
            type: "Potato",
            season: "Spring",
            status: "pending",
            image: "/images/potato.jpg",
          },
          {
            name: "TomatoPlus Pro",
            company: "VegeTech Solutions",
            type: "Tomato",
            season: "Summer",
            status: "verified",
            image: "/images/tomato.jpg",
          },
        ];
        function createProductCard(product) {
          return `
<div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow">
<div class="relative aspect-square bg-gray-100">
<img src="${
            product.image
          }" alt="${product.name}" class="w-full h-full object-cover">
<div class="absolute top-2 right-2 ${
            product.status === "verified"
              ? "bg-green-100 text-green-800"
              : "bg-yellow-100 text-yellow-800"
          } text-xs px-2 py-0.5 rounded-full flex items-center gap-1">
<i class="ri-${product.status === "verified" ? "check" : "time"}-line"></i>
<span>${product.status === "verified" ? "Verified" : "Pending"}</span>
</div>
</div>
<div class="p-3">
<h3 class="font-medium">${product.name}</h3>
<p class="text-xs text-gray-500 mt-1">${product.company}</p>
<div class="flex items-center gap-2 mt-2">
<div class="flex items-center gap-1 text-xs text-gray-500">
<i class="ri-plant-line"></i>
<span>${product.type}</span>
</div>
<div class="w-1 h-1 bg-gray-300 rounded-full"></div>
<div class="flex items-center gap-1 text-xs text-gray-500">
<i class="ri-sun-line"></i>
<span>${product.season}</span>
</div>
</div>
<button class="mt-3 w-full ${
            product.status === "verified"
              ? "bg-primary text-white"
              : "bg-gray-200 text-gray-700"
          } py-2 rounded-lg flex items-center justify-center gap-1 !rounded-button whitespace-nowrap">
<i class="ri-${
            product.status === "verified" ? "qr-code" : "information"
          }-line"></i>
<span>${product.status === "verified" ? "Verify Product" : "View Status"}</span>
</button>
</div>
</div>
`;
        }
        function updateProductGrid(products) {
          const productGrid = document.querySelector(
            ".grid.grid-cols-1.sm\\:grid-cols-2.md\\:grid-cols-3.lg\\:grid-cols-4.xl\\:grid-cols-5.gap-4"
          );
          productGrid.innerHTML = products
            .map((product) => createProductCard(product))
            .join("");
        }
        function updatePaginationButtons() {
          const buttons = pagination.querySelectorAll("button[data-page]");
          buttons.forEach((button) => {
            const page = parseInt(button.dataset.page);
            if (page === currentPage) {
              button.classList.remove("text-gray-700", "hover:bg-gray-100");
              button.classList.add("bg-primary", "text-white");
            } else {
              button.classList.remove("bg-primary", "text-white");
              button.classList.add("text-gray-700", "hover:bg-gray-100");
            }
          });
        }
        pagination.addEventListener("click", function (e) {
          const pageButton = e.target.closest("button[data-page]");
          if (pageButton) {
            const newPage = parseInt(pageButton.dataset.page);
            if (newPage !== currentPage) {
              currentPage = newPage;
              if (currentPage === 2) {
                updateProductGrid(page2Products);
              }
              updatePaginationButtons();
            }
          }
        });
        prevPageBtn.addEventListener("click", function () {
          if (currentPage > 1) {
            currentPage--;
            updatePaginationButtons();
            if (currentPage === 1) {
              location.reload();
            }
          }
        });
        nextPageBtn.addEventListener("click", function () {
          if (currentPage < 10) {
            currentPage++;
            updatePaginationButtons();
            if (currentPage === 2) {
              updateProductGrid(page2Products);
            }
          }
        });
      });
    </script>
    <div
      id="verificationModal"
      class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50"
    >
      <div class="bg-white rounded-lg max-w-lg w-full mx-4">
        <div
          class="p-4 border-b border-gray-100 flex justify-between items-center"
        >
          <h3 class="font-medium text-lg">Product Verification</h3>
          <button
            onclick="closeVerificationModal()"
            class="w-8 h-8 flex items-center justify-center text-gray-500 hover:bg-gray-100 rounded-full"
          >
            <i class="ri-close-line"></i>
          </button>
        </div>
        <div class="p-6">
          <div class="flex flex-col items-center mb-6">
            <div
              id="qrScanner"
              class="w-full aspect-square bg-gray-900 rounded-lg mb-4 relative hidden"
            >
              <video
                id="qrVideo"
                class="w-full h-full object-cover rounded-lg"
              ></video>
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="w-48 h-48 border-2 border-primary rounded-lg"></div>
              </div>
            </div>
            <div id="verificationResult" class="w-full hidden">
              <div class="flex items-center gap-3 p-4 rounded-lg mb-4">
                <div
                  class="w-12 h-12 flex-shrink-0 flex items-center justify-center rounded-full"
                ></div>
                <div class="flex-1">
                  <h4 class="font-medium verification-status"></h4>
                  <p class="text-sm text-gray-500 verification-message"></p>
                </div>
              </div>
              <div class="space-y-4 border-t border-gray-100 pt-4">
                <div>
                  <h5 class="text-sm font-medium mb-2">
                    Certification Details
                  </h5>
                  <div class="text-sm text-gray-600">
                    <p class="certification-id"></p>
                    <p class="certification-date"></p>
                    <p class="certification-authority"></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
            <button
              id="scanQRBtn"
              onclick="startQRScanner()"
              class="flex flex-col items-center gap-2 p-4 border border-gray-200 rounded-lg hover:border-primary !rounded-button"
            >
              <div
                class="w-10 h-10 flex items-center justify-center bg-primary/10 text-primary rounded-full"
              >
                <i class="ri-qr-scan-2-line"></i>
              </div>
              <span class="text-sm font-medium">Scan QR</span>
            </button>
            <button
              id="enterCodeBtn"
              onclick="showCodeInput()"
              class="flex flex-col items-center gap-2 p-4 border border-gray-200 rounded-lg hover:border-primary !rounded-button"
            >
              <div
                class="w-10 h-10 flex items-center justify-center bg-primary/10 text-primary rounded-full"
              >
                <i class="ri-keyboard-box-line"></i>
              </div>
              <span class="text-sm font-medium">Enter Code</span>
            </button>
            <button
              id="uploadImageBtn"
              onclick="uploadImage()"
              class="flex flex-col items-center gap-2 p-4 border border-gray-200 rounded-lg hover:border-primary !rounded-button"
            >
              <div
                class="w-10 h-10 flex items-center justify-center bg-primary/10 text-primary rounded-full"
              >
                <i class="ri-image-add-line"></i>
              </div>
              <span class="text-sm font-medium">Upload Image</span>
            </button>
          </div>
          <div id="codeInputSection" class="mt-4 hidden">
            <div class="relative">
              <input
                type="text"
                id="verificationCode"
                class="w-full pl-4 pr-12 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Enter verification code"
              />
              <button
                onclick="verifyCode()"
                class="absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 flex items-center justify-center text-primary"
              >
                <i class="ri-arrow-right-line"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentProduct = null;
        window.openVerificationModal = function (button) {
          const modal = document.getElementById("verificationModal");
          const productCard = button.closest(".bg-white.border");
          currentProduct = {
            name: productCard.querySelector("h3").textContent,
            company: productCard.querySelector(".text-xs.text-gray-500")
              .textContent,
            type: productCard.querySelector(".ri-plant-line").nextElementSibling
              .textContent,
          };
          modal.classList.remove("hidden");
          resetModalState();
        };
        window.closeVerificationModal = function () {
          const modal = document.getElementById("verificationModal");
          modal.classList.add("hidden");
          stopQRScanner();
          resetModalState();
        };
        window.startQRScanner = function () {
          const scanner = document.getElementById("qrScanner");
          const video = document.getElementById("qrVideo");
          scanner.classList.remove("hidden");
          document.getElementById("codeInputSection").classList.add("hidden");
          document.getElementById("verificationResult").classList.add("hidden");
          navigator.mediaDevices
            .getUserMedia({ video: { facingMode: "environment" } })
            .then((stream) => {
              video.srcObject = stream;
              video.play();
              setTimeout(() => {
                simulateSuccessfulScan();
              }, 3000);
            })
            .catch((err) => {
              console.error("Camera access error:", err);
            });
        };
        function stopQRScanner() {
          const video = document.getElementById("qrVideo");
          if (video.srcObject) {
            video.srcObject.getTracks().forEach((track) => track.stop());
          }
          document.getElementById("qrScanner").classList.add("hidden");
        }
        window.showCodeInput = function () {
          document
            .getElementById("codeInputSection")
            .classList.remove("hidden");
          document.getElementById("qrScanner").classList.add("hidden");
          document.getElementById("verificationResult").classList.add("hidden");
          stopQRScanner();
        };
        window.uploadImage = function () {
          const input = document.createElement("input");
          input.type = "file";
          input.accept = "image/*";
          input.onchange = function (e) {
            if (e.target.files.length > 0) {
              setTimeout(() => {
                showVerificationResult(true);
              }, 1500);
            }
          };
          input.click();
        };
        window.verifyCode = function () {
          const code = document.getElementById("verificationCode").value.trim();
          if (code) {
            showVerificationResult(code === "123456");
          }
        };
        function simulateSuccessfulScan() {
          stopQRScanner();
          showVerificationResult(true);
        }
        function showVerificationResult(isVerified) {
          const result = document.getElementById("verificationResult");
          const statusIcon = result.querySelector(".w-12.h-12");
          const status = result.querySelector(".verification-status");
          const message = result.querySelector(".verification-message");
          const certId = result.querySelector(".certification-id");
          const certDate = result.querySelector(".certification-date");
          const certAuth = result.querySelector(".certification-authority");
          if (isVerified) {
            statusIcon.className =
              "w-12 h-12 flex-shrink-0 flex items-center justify-center bg-green-100 text-green-800 rounded-full";
            statusIcon.innerHTML = '<i class="ri-check-line ri-lg"></i>';
            status.textContent = "Verification Successful";
            status.className = "font-medium text-green-800";
            message.textContent = `${currentProduct.name} is a verified GMO product from ${currentProduct.company}`;
            certId.textContent =
              "Certification ID: GMO-2025-" +
              Math.random().toString().slice(2, 8);
            certDate.textContent = "Certification Date: May 5, 2025";
            certAuth.textContent =
              "Certifying Authority: Department of Agriculture";
          } else {
            statusIcon.className =
              "w-12 h-12 flex-shrink-0 flex items-center justify-center bg-red-100 text-red-800 rounded-full";
            statusIcon.innerHTML = '<i class="ri-close-line ri-lg"></i>';
            status.textContent = "Verification Failed";
            status.className = "font-medium text-red-800";
            message.textContent =
              "Unable to verify the product. Please check the verification code or try scanning again.";
            certId.textContent = "";
            certDate.textContent = "";
            certAuth.textContent = "";
          }
          document.getElementById("qrScanner").classList.add("hidden");
          document.getElementById("codeInputSection").classList.add("hidden");
          result.classList.remove("hidden");
        }
        function resetModalState() {
          document.getElementById("qrScanner").classList.add("hidden");
          document.getElementById("codeInputSection").classList.add("hidden");
          document.getElementById("verificationResult").classList.add("hidden");
          document.getElementById("verificationCode").value = "";
          stopQRScanner();
        }
      });
    </script>
  </body>
</html>
